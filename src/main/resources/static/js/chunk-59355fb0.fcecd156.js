(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59355fb0"],{"1dde":function(t,s,e){var o=e("d039"),a=e("b622"),i=e("2d00"),r=a("species");t.exports=function(t){return i>=51||!o((function(){var s=[],e=s.constructor={};return e[r]=function(){return{foo:1}},1!==s[t](Boolean).foo}))}},2017:function(t,s,e){},"36bf":function(t,s,e){"use strict";e("84a0")},"6ee8":function(t,s,e){},8070:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("div",{attrs:{id:"main-content"}},[e("div",{attrs:{id:"author-info"}},[e("div",{staticClass:"person-image"},[e("div",{staticClass:"person-portrait"},[e("div",{staticClass:"person-avatar-wr"},[e("el-avatar",{staticClass:"person-avatar",attrs:{size:110,src:t.sourceUrl}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.scholar_info.isVerified,expression:"!scholar_info.isVerified"}],staticClass:"person-authen is-hover"},[e("p",{staticClass:"authen-button",on:{click:t.handleAuthen}},[t._v("我要认证")])]),e("div",{staticClass:"person-focus is-hover"},[e("p",{directives:[{name:"show",rawName:"v-show",value:!t.scholar_info.isFocus,expression:"!scholar_info.isFocus"}],staticClass:"focus-button",on:{click:t.handleFocus}},[t._v("关注")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.scholar_info.isFocus,expression:"scholar_info.isFocus"}],staticClass:"unfocus-button",on:{click:t.handleFocus}},[t._v("已关注 "),e("i",{staticClass:"el-icon-check"})])])]),e("div",{staticClass:"person-baseinfo"},[e("div",{staticClass:"p-name"},[t._v(t._s(t.scholar_info.name))]),e("div",{staticClass:"p-volume c-grey"},[t._v(t._s(t.scholar_info.volume)+"人看过")]),e("div",{staticClass:"p-scholarID"},[e("div",{staticClass:"p-scholarID-all c-grey"},[e("span",{staticClass:"p-scholarID-id"},[t._v(" "+t._s(t.scholar_info.scholar_id)+" ")])])]),e("div",{staticClass:"p-affiliate"},[t._v(t._s(t.scholar_info.affiliate))]),e("ul",{staticClass:"p-ach"},t._l(t.scholar_info.achList,(function(s,o){return e("li",{key:o,staticClass:"p-ach-item"},[e("p",{staticClass:"p-ach-type c-grey"},[t._v(t._s(s.title))]),e("p",{staticClass:"p-ach-num"},[t._v(t._s(s.num))])])})),0)])]),e("div",{attrs:{id:"main-content-left"}},[e("div",{attrs:{id:"article-list"}},[e("div",{attrs:{id:"article-list-container"}},[e("div",{attrs:{id:"content-top"}},[e("div",{staticClass:"content-filter"},[e("div",{staticClass:"filter-item"},[e("el-popover",{attrs:{placement:"bottom-start",width:"100",trigger:"click"}},[e("div",[t._v("全部时间")]),e("div",[t._v("2020")]),e("div",[t._v("2019")]),e("div",[t._v("2018")]),e("el-button",{staticClass:"button-sort",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(this.getYear)+" "),e("i",{ref:"icon_year",staticClass:"el-icon-s-data",staticStyle:{float:"right"}})])],1)],1),e("div",{staticClass:"filter-item"},[e("el-popover",{attrs:{placement:"bottom-start",width:"100",trigger:"click"}},[e("div",{on:{click:t.paperTo0}},[t._v("全部")]),e("div",{on:{click:t.paperTo1}},[t._v("期刊")]),e("div",{on:{click:t.paperTo2}},[t._v("会议")]),e("div",{on:{click:t.paperTo3}},[t._v("专著")]),e("el-button",{staticClass:"button-sort",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(this.getPaper)+" "),e("i",{ref:"icon_paper",staticClass:"el-icon-s-data",staticStyle:{float:"right"}})])],1)],1),e("div",{staticClass:"filter-item"},[e("el-popover",{attrs:{placement:"bottom-start",width:"100",trigger:"click"}},[e("div",{on:{click:t.authorTo0}},[t._v("全部作者")]),e("div",{on:{click:t.authorTo1}},[t._v("第一作者")]),e("el-button",{staticClass:"button-sort",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(this.getAuthor)+" "),e("i",{ref:"icon_author",staticClass:"el-icon-s-data",staticStyle:{float:"right"}})])],1)],1),e("div",{staticClass:"filter-item"},[e("el-popover",{attrs:{placement:"bottom-start",width:"100",trigger:"click"}},[e("div",{on:{click:t.sortToTime}},[t._v("按时间降序")]),e("div",{on:{click:t.sortToCited}},[t._v("按被引降序")]),e("el-button",{staticClass:"button-sort",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(this.getSort)+" "),e("i",{ref:"icon_sort",staticClass:"el-icon-s-data",staticStyle:{float:"right"}})])],1)],1)])]),e("div",{attrs:{id:"content-result"}},[e("div",{staticClass:"result-list"},t._l(t.result_list,(function(t,s){return e("div",{key:s},[e("academic-item",{attrs:{item:t}})],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.total_rs>10,expression:"total_rs > 10"}],staticClass:"result-page"},[e("el-pagination",{staticClass:"page",attrs:{background:"","current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.total_rs},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(s){t.currentPage=s},"update:current-page":function(s){t.currentPage=s}}})],1)])])])]),e("div",{attrs:{id:"main-content-right"}},[e("div",{staticClass:"co-author-wr"},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.total_co_authors>4,expression:"total_co_authors>4"}],staticClass:"el-icon-d-arrow-right",staticStyle:{float:"right","margin-right":"10px"}},[t._v("更多")]),e("h3",[t._v("合作学者")]),e("div",{staticClass:"co-author-list"},t._l(t.co_authors_list_show,(function(s,o){return e("div",{key:o},[e("div",{staticClass:"co-author-avatar is-hover",on:{click:function(e){return t.toScholarPage(s.scholar_id)}}},[e("el-avatar",{attrs:{shape:"square",size:40,src:t.sourceUrl}})],1),e("div",{staticClass:"co-author-item"},[e("div",{staticClass:"co-author-name",on:{click:function(e){return t.toScholarPage(s)}}},[t._v(t._s(s.name))]),e("div",{staticClass:"co-author-affiliate"},[t._v(t._s(s.org))])])])})),0)]),e("div",{staticClass:"co-affiliate-wr"},[e("h3",[t._v("合作机构")]),t._l(t.co_affiliate_list,(function(s,o){return e("ul",{key:o,staticClass:"co-affiliate-list"},[e("li",[e("span",{staticClass:"co_affiliate_name"},[t._v(t._s(s.first))]),e("span",{staticClass:"co_affiliate_line"},[e("span",{staticClass:"co_affiliate_width"}),e("span",{staticClass:"co_affiliate_count"},[t._v(t._s(s.second))])])])])}))],2)])])])])},a=[],i=(e("fb6a"),e("b0c0"),e("e592")),r={name:"ScholarPage",components:{AcademicItem:i["a"]},data:function(){return{user_id:"0",scholar_id:"0",scholar_info:{name:"张三",volume:21312,scholar_id:"CN-B073VAMJ",affiliate:"北京航空航天大学",achList:[],isVerified:!1,isFocus:!1},co_authors_list:[],co_authors_list_show:[],co_affiliate_list:[],co_affiliate_list_show:[],result_list:[],sort_words:{sc_year:"",paper_type:"0",first_author:"0",sc_sort:"time"},currentPage:1,total_rs:0,total_co_authors:0,total_co_affs:0,sourceUrl:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png"}},methods:{handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t))},toScholarPage:function(t){if(null!==t.expertID)this.$router.push({name:"ScholarPage",params:{expertid:t.expertID}});else{var s={searchWords:"",title:"",keyWords:"",experts:t.name,origin:"",startTime:"0",endTime:"0"};this.$router.push({name:"AcademicSearch",params:{search_words:encodeURIComponent(JSON.stringify(s))}})}},handleAuthen:function(){var t=this;console.log("点击了申请认领门户");var s=this;this.$prompt("请使用您所在机构的邮箱认证！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"邮箱格式不正确"}).then((function(t){var e=t.value;s.authen(e)})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},authen:function(t){var s=this;this.$api.application.create({token:sessionStorage.getItem("token"),userID:sessionStorage.getItem("userID"),objectID:s.scholar_id,flag:1,email:t}).then((function(t){"200"===t.code?s.$message({type:"success",message:"成功提交申请"}):s.$message({message:t.msg,type:"error"})}))},handleFocus:function(){var t=this;this.$api.scholar.focusScholar({scholar_id:t.scholar_id,user_id:t.user_id}).then((function(s){"200"===s.code?(t.scholar_info.isFocus=s.data,t.$message({message:"成功关注该门户！",type:"success"})):t.$message({message:s.msg,type:"error"})}))},paperTo0:function(){this.sort_words.paper_type="0"},paperTo1:function(){this.sort_words.paper_type="1"},paperTo2:function(){this.sort_words.paper_type="2"},paperTo3:function(){this.sort_words.paper_type="3"},authorTo0:function(){this.sort_words.first_author="0"},authorTo1:function(){this.sort_words.first_author="1"},sortToTime:function(){this.sort_words.sc_sort="time"},sortToCited:function(){this.sort_words.sc_sort="cited"},loadInfo:function(){var t=this;this.$api.scholar.getInfo({scholar_id:t.scholar_id,user_id:null===sessionStorage.getItem("userID")?-1:sessionStorage.getItem("userID")}).then((function(s){"200"===s.code?t.scholar_info=s.data:t.$message({message:"loadInfo失败",type:"error"})})),this.loadRelateSc(),this.loadCoAuthorsList(),this.loadCoAffList()},loadRelateSc:function(){var t=this;this.$api.academic.getSearchResult({search_words:{searchWords:"",title:"",keyWords:"",experts:t.scholar_info.name,origin:"",startTime:"0",endTime:"0"},filter_words:{year:t.sort_words.sc_year,cate:"",level:"",savetype:"",keywords:"",type:t.sort_words.paper_type,authors:"",jnls:"",affs:""},sort:t.sort_words.sc_sort,page:t.currentPage,userID:null===sessionStorage.getItem("userID")?-1:sessionStorage.getItem("userID")}).then((function(s){"200"===s.code?(t.result_list=s.data.result_list,t.total_rs=s.data.total):t.$message({message:s.msg,type:"error"})}))},loadCoAuthorsList:function(){var t=this;this.$api.scholar.getCoAuthors({scholar_id:t.scholar_id}).then((function(s){"200"===s.code?(t.co_authors_list=s.data,t.total_co_authors=t.co_authors_list.length,t.total_co_authors>4?t.co_authors_list_show=t.co_authors_list.slice(0,4):t.co_authors_list_show=t.co_authors_list):t.$message({message:s.msg,type:"error"})}))},loadCoAffList:function(){var t=this;this.$api.scholar.getCoAffiliate({scholar_id:t.scholar_id}).then((function(s){"200"===s.code?(t.co_affiliate_list=s.data,t.total_co_affs=t.co_affiliate_list.length):t.$message({message:s.msg,type:"error"})}))}},computed:{getYear:function(){switch(this.sort_words.sc_year){case"2020":return"2020";case"2019":return"2019";default:return"全部年份"}},getPaper:function(){switch(this.sort_words.paper_type){case"0":return"全部类型";case"1":return"期刊";case"2":return"会议";case"3":return"专著";default:return"全部类型"}},getAuthor:function(){switch(this.sort_words.first_author){case"0":return"全部作者";case"1":return"第一作者";default:return"全部作者"}},getSort:function(){switch(this.sort_words.sc_sort){case"time":return"按时间降序";case"cited":return"按被引降序";default:return"按时间降序"}}},watch:{sort_words:{handler:function(){console.log("sort_words有改动"),this.loadRelateSc()},deep:!0},currentPage:function(){console.log("page有改动"),this.loadRelateSc()}},mounted:function(){this.user_id=sessionStorage.getItem("userID"),this.scholar_id=this.$route.params.expertid,this.currentPage=1,this.loadInfo()}},n=r,c=(e("dd32"),e("e182"),e("2877")),l=Object(c["a"])(n,o,a,!1,null,"e9785560",null);s["default"]=l.exports},8418:function(t,s,e){"use strict";var o=e("c04e"),a=e("9bf2"),i=e("5c6c");t.exports=function(t,s,e){var r=o(s);r in t?a.f(t,r,i(0,e)):t[r]=e}},"84a0":function(t,s,e){},ae40:function(t,s,e){var o=e("83ab"),a=e("d039"),i=e("5135"),r=Object.defineProperty,n={},c=function(t){throw t};t.exports=function(t,s){if(i(n,t))return n[t];s||(s={});var e=[][t],l=!!i(s,"ACCESSORS")&&s.ACCESSORS,u=i(s,0)?s[0]:c,d=i(s,1)?s[1]:void 0;return n[t]=!!e&&!a((function(){if(l&&!o)return!0;var t={length:-1};l?r(t,1,{enumerable:!0,get:c}):t[1]=1,e.call(t,u,d)}))}},b0c0:function(t,s,e){var o=e("83ab"),a=e("9bf2").f,i=Function.prototype,r=i.toString,n=/^\s*function ([^ (]*)/,c="name";o&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})},dd32:function(t,s,e){"use strict";e("6ee8")},e182:function(t,s,e){"use strict";e("2017")},e592:function(t,s,e){"use strict";var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-card",{ref:"card",staticClass:"card-body",staticStyle:{"text-align":"left"}},[e("div",{staticClass:"sc-content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"title-click",on:{click:t.toDetailPage}},[t._v(t._s(t.item.title))])]),e("div",{staticClass:"summary"},[t._v(t._s(t.item.summary))]),e("div",{staticClass:"info"},[t._l(t.item.authors,(function(s,o){return e("span",{key:o},[e("span",{staticClass:"name-click",on:{click:function(e){return t.toAuthorPage(s)}}},[t._v(t._s(s.name)+" ")])])})),e("span",[t._v(" - ")]),e("span",{staticClass:"source-click",on:{click:function(s){return t.toSourcePage(t.item.origin)}}},[t._v(t._s(t.item.origin))]),e("span",[t._v(" - 被引量：")]),e("span",{staticClass:"citation-click",on:{click:function(s){return t.toCitedPage()}}},[t._v(t._s(t.item.cited_quantity))]),e("span",[t._v(" - ")]),e("span",{staticClass:"grey-part"},[t._v(t._s(t.item.time.substring(0,4))+"年")])],2),e("div",{staticClass:"allVersion"},[e("span",{staticClass:"grey-part"},[t._v("来源：")]),e("span",{staticClass:"version-click",on:{click:function(s){return t.toLink(t.item.link)}}},[t._v(t._s(t.item.link))])])]),e("div",{staticClass:"sc_ext"},[this.is_favor?e("el-button",{staticClass:"ext-button",attrs:{id:"button-unfavor",type:"mini",round:"",icon:"el-icon-star-on"},on:{click:function(s){return t.favor()}}},[t._v("已收藏")]):t._e(),this.is_favor?t._e():e("el-button",{staticClass:"ext-button",attrs:{id:"button-favor",type:"mini",round:"",icon:"el-icon-star-off"},on:{click:function(s){return t.favor()}}},[t._v("收藏")]),e("el-button",{staticClass:"ext-button",attrs:{id:"button-quote",type:"mini",round:"",icon:"el-icon-share"},on:{click:function(s){return t.quote()}}},[t._v("引用")]),e("el-button",{staticClass:"ext-button",attrs:{id:"button-batchQuote",type:"mini",round:"",icon:"el-icon-folder-add"},on:{click:function(s){return t.batchQuote()}}},[t._v("批量引用")]),e("el-button",{staticClass:"ext-button",attrs:{id:"button-download",type:"mini",round:"",icon:"el-icon-download"},on:{click:function(s){return t.download()}}},[t._v("免费下载")])],1)])},a=[],i=(e("b0c0"),{name:"AcademicItem",props:{c_sc:{type:Object,default:null}},data:function(){return{item:{},is_favor:!1}},methods:{toDetailPage:function(){console.log("跳转文章详情页！");var t=window.location.origin+"/#/academicShow/"+this.item.id;null===window.open(t)&&(window.location.herf=t)},toAuthorPage:function(t){console.log("跳转学者搜索！"),null!==t.id?this.$router.push({name:"ScholarPage",params:{expertid:t.id}}):this.$emit("toAuthorPage",t.name)},toSourcePage:function(t){console.log("跳转来源搜索！"),this.$emit("toSourcePage",t)},toCitedPage:function(){console.log("跳转引用详情页！")},toLink:function(t){window.open(t,"_blank")},favor:function(){console.log("收藏/取消收藏文章！");var t=this;this.$api.academic.favorSc({document_id:t.item.documentid,user_id:sessionStorage.getItem("userID"),token:sessionStorage.getItem("token")}).then((function(s){"200"===s.code?(t.is_favor=s.data,!0===t.is_favor?t.$message({message:"成功收藏该资源！",type:"success"}):t.$message({message:"成功取消收藏该资源！",type:"success"})):t.$message({message:s.msg,type:"error"})})),document.getElementById("button-favor").blur()},quote:function(){console.log("引用文章！"),document.getElementById("button-quote").blur()},batchQuote:function(){console.log("批量引用文章！"),document.getElementById("button-batchQuote").blur()},download:function(){console.log("免费下载！"),document.getElementById("button-download").blur()}},watch:{c_sc:{handler:function(){this.item=this.c_sc},deep:!0}},mounted:function(){this.item=this.c_sc,this.is_favor=this.item.is_favor}}),r=i,n=(e("36bf"),e("2877")),c=Object(n["a"])(r,o,a,!1,null,"a30a081c",null);s["a"]=c.exports},e8b5:function(t,s,e){var o=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}},fb6a:function(t,s,e){"use strict";var o=e("23e7"),a=e("861d"),i=e("e8b5"),r=e("23cb"),n=e("50c4"),c=e("fc6a"),l=e("8418"),u=e("b622"),d=e("1dde"),h=e("ae40"),f=d("slice"),_=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),v=[].slice,m=Math.max;o({target:"Array",proto:!0,forced:!f||!_},{slice:function(t,s){var e,o,u,d=c(this),h=n(d.length),f=r(t,h),_=r(void 0===s?h:s,h);if(i(d)&&(e=d.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)?a(e)&&(e=e[p],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return v.call(d,f,_);for(o=new(void 0===e?Array:e)(m(_-f,0)),u=0;f<_;f++,u++)f in d&&l(o,u,d[f]);return o.length=u,o}})}}]);
//# sourceMappingURL=chunk-59355fb0.fcecd156.js.map